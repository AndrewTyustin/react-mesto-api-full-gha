{"ast":null,"code":"class Api {\n  constructor(apiAddress) {\n    this._link = apiAddress;\n  }\n  _processingServerResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`код ошибки: ${res.status}`);\n    }\n  }\n  getInitialCards() {\n    return fetch(`${this._link}cards`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(this._processingServerResponse);\n  }\n  addNewCard(name, link) {\n    return fetch(`${this._link}cards`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._processingServerResponse);\n  }\n  deleteCard(cardId) {\n    return fetch(`${this._link}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(this._processingServerResponse);\n  }\n  getUserData() {\n    return fetch(`${this._link}users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(this._processingServerResponse);\n  }\n  sendUserData(userName, userAbout) {\n    return fetch(`${this._link}users/me`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({\n        name: userName,\n        about: userAbout\n      })\n    }).then(this._processingServerResponse);\n  }\n  sendAvatarData(avatarLink) {\n    return fetch(`${this._link}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({\n        avatar: avatarLink.avatar\n      })\n    }).then(this._processingServerResponse);\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    const methodUsed = isLiked ? 'PUT' : 'DELETE';\n    return fetch(`${this._link}cards/${cardId}/likes`, {\n      method: methodUsed,\n      headers: {\n        'Content-Type': 'application/json',\n        authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(this._processingServerResponse);\n  }\n}\nconst apiConnect = new Api('http://localhost:3000');\nexport default apiConnect;","map":{"version":3,"names":["Api","constructor","apiAddress","_link","_processingServerResponse","res","ok","json","Promise","reject","status","getInitialCards","fetch","method","headers","authorization","localStorage","getItem","then","addNewCard","name","link","body","JSON","stringify","deleteCard","cardId","getUserData","sendUserData","userName","userAbout","about","sendAvatarData","avatarLink","avatar","changeLikeCardStatus","isLiked","methodUsed","apiConnect"],"sources":["C:/Users/EPIX/Desktop/praktikum/react-mesto-api-full-gha/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\r\n  constructor(apiAddress) {\r\n    this._link = apiAddress;\r\n  }\r\n  _processingServerResponse (res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`код ошибки: ${res.status}`);\r\n    }\r\n  }\r\n  getInitialCards() {\r\n    return fetch(`${this._link}cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  addNewCard(name, link) {\r\n    return fetch(`${this._link}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ name, link }),\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._link}cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  getUserData() {\r\n    return fetch(`${this._link}users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  sendUserData(userName, userAbout) {\r\n    return fetch(`${this._link}users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ name: userName, about: userAbout }),\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  sendAvatarData(avatarLink) {\r\n    return fetch(`${this._link}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ avatar: avatarLink.avatar })\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const methodUsed = isLiked ? 'PUT' : 'DELETE';\r\n    return fetch(`${this._link}cards/${cardId}/likes`, {\r\n      method: methodUsed,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n}\r\n\r\nconst apiConnect = new Api('http://localhost:3000');\r\nexport default apiConnect;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}