{"ast":null,"code":"import _classCallCheck from\"C:/Users/EPIX/Desktop/praktikum/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/EPIX/Desktop/praktikum/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(apiAddress){_classCallCheck(this,Api);this._link=apiAddress;}_createClass(Api,[{key:\"_processingServerResponse\",value:function _processingServerResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u043A\\u043E\\u0434 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0438: \".concat(res.status));}}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._link,\"cards\"),{method:'GET',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(this._processingServerResponse);}},{key:\"addNewCard\",value:function addNewCard(name,link){return fetch(\"\".concat(this._link,\"cards\"),{method:'POST',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({name:name,link:link})}).then(this._processingServerResponse);}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this._link,\"cards/\").concat(cardId),{method:'DELETE',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(this._processingServerResponse);}},{key:\"getUserData\",value:function getUserData(){return fetch(\"\".concat(this._link,\"users/me\"),{method:'GET',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(this._processingServerResponse);}},{key:\"sendUserData\",value:function sendUserData(userName,userAbout){return fetch(\"\".concat(this._link,\"users/me\"),{method:\"PATCH\",headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({name:userName,about:userAbout})}).then(this._processingServerResponse);}},{key:\"sendAvatarData\",value:function sendAvatarData(avatarLink){return fetch(\"\".concat(this._link,\"users/me/avatar\"),{method:'PATCH',headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({avatar:avatarLink.avatar})}).then(this._processingServerResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){var methodUsed=isLiked?'PUT':'DELETE';return fetch(\"\".concat(this._link,\"cards/\").concat(cardId,\"/likes\"),{method:methodUsed,headers:{'Content-Type':'application/json',authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(this._processingServerResponse);}}]);return Api;}();var apiConnect=new Api('https://api.andrewtyust.students.nomoredomains.monster/');export default apiConnect;","map":{"version":3,"names":["Api","apiAddress","_link","res","ok","json","Promise","reject","status","fetch","method","headers","authorization","localStorage","getItem","then","_processingServerResponse","name","link","body","JSON","stringify","cardId","userName","userAbout","about","avatarLink","avatar","isLiked","methodUsed","apiConnect"],"sources":["C:/Users/EPIX/Desktop/praktikum/react-mesto-api-full-gha/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\r\n  constructor(apiAddress) {\r\n    this._link = apiAddress;\r\n  }\r\n  _processingServerResponse (res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`код ошибки: ${res.status}`);\r\n    }\r\n  }\r\n  getInitialCards() {\r\n    return fetch(`${this._link}cards`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  addNewCard(name, link) {\r\n    return fetch(`${this._link}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ name, link }),\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._link}cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  getUserData() {\r\n    return fetch(`${this._link}users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  sendUserData(userName, userAbout) {\r\n    return fetch(`${this._link}users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ name: userName, about: userAbout }),\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  sendAvatarData(avatarLink) {\r\n    return fetch(`${this._link}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n      body: JSON.stringify({ avatar: avatarLink.avatar })\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    const methodUsed = isLiked ? 'PUT' : 'DELETE';\r\n    return fetch(`${this._link}cards/${cardId}/likes`, {\r\n      method: methodUsed,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: `Bearer ${ localStorage.getItem('token') }`,\r\n      },\r\n    })\r\n    .then(this._processingServerResponse)\r\n  }\r\n}\r\n\r\nconst apiConnect = new Api('https://api.andrewtyust.students.nomoredomains.monster/');\r\nexport default apiConnect;\r\n"],"mappings":"+SAAMA,IAAG,yBACP,aAAYC,UAAU,CAAE,2BACtB,IAAI,CAACC,KAAK,CAAGD,UAAU,CACzB,CAAC,yDACD,mCAA2BE,GAAG,CAAE,CAC9B,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAOD,IAAG,CAACE,IAAI,EAAE,CACnB,CAAC,IAAM,CACL,MAAOC,QAAO,CAACC,MAAM,oEAAgBJ,GAAG,CAACK,MAAM,EAAG,CACpD,CACF,CAAC,+BACD,0BAAkB,CAChB,MAAOC,MAAK,WAAI,IAAI,CAACP,KAAK,UAAS,CACjCQ,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CACF,CAAC,CAAC,CACDC,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,0BACD,oBAAWC,IAAI,CAAEC,IAAI,CAAE,CACrB,MAAOT,MAAK,WAAI,IAAI,CAACP,KAAK,UAAS,CACjCQ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CAAC,CACDK,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEJ,IAAI,CAAJA,IAAI,CAAEC,IAAI,CAAJA,IAAK,CAAC,CACrC,CAAC,CAAC,CACDH,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,0BACD,oBAAWM,MAAM,CAAE,CACjB,MAAOb,MAAK,WAAI,IAAI,CAACP,KAAK,kBAASoB,MAAM,EAAI,CAC3CZ,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CACF,CAAC,CAAC,CACDC,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,2BACD,sBAAc,CACZ,MAAOP,MAAK,WAAI,IAAI,CAACP,KAAK,aAAY,CACpCQ,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CACF,CAAC,CAAC,CACDC,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,4BACD,sBAAaO,QAAQ,CAAEC,SAAS,CAAE,CAChC,MAAOf,MAAK,WAAI,IAAI,CAACP,KAAK,aAAY,CACpCQ,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CAAC,CACDK,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEJ,IAAI,CAAEM,QAAQ,CAAEE,KAAK,CAAED,SAAU,CAAC,CAC3D,CAAC,CAAC,CACDT,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,8BACD,wBAAeU,UAAU,CAAE,CACzB,MAAOjB,MAAK,WAAI,IAAI,CAACP,KAAK,oBAAmB,CAC3CQ,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CAAC,CACDK,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEM,MAAM,CAAED,UAAU,CAACC,MAAO,CAAC,CACpD,CAAC,CAAC,CACDZ,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,oCACD,8BAAqBM,MAAM,CAAEM,OAAO,CAAE,CACpC,GAAMC,WAAU,CAAGD,OAAO,CAAG,KAAK,CAAG,QAAQ,CAC7C,MAAOnB,MAAK,WAAI,IAAI,CAACP,KAAK,kBAASoB,MAAM,WAAU,CACjDZ,MAAM,CAAEmB,UAAU,CAClBlB,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAaC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzD,CACF,CAAC,CAAC,CACDC,IAAI,CAAC,IAAI,CAACC,yBAAyB,CAAC,CACvC,CAAC,mBAGH,GAAMc,WAAU,CAAG,GAAI9B,IAAG,CAAC,yDAAyD,CAAC,CACrF,cAAe8B,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}